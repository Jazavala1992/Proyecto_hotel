# üè® Sistema de Gesti√≥n Hotelera Multi-Base de Datos# üè® Sistema de Gesti√≥n Hotelera v2.0# üè® Sistema de Gesti√≥n Hotelera v2.0# üè® Sistema de Gesti√≥n Hotelera# üè® Sistema de Gesti√≥n Hotelera# üè® Sistema de Gesti√≥n Hotelera# üè® Sistema de Gesti√≥n Hotelera



<div align="center">



![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)Sistema completo de gesti√≥n hotelera con **arquitectura multi-base de datos**. Soporta PostgreSQL, MySQL, SQL Server y Oracle.

![Node](https://img.shields.io/badge/node-16%2B-brightgreen.svg)

![React](https://img.shields.io/badge/react-18.2.0-61dafb.svg)

![License](https://img.shields.io/badge/license-MIT-green.svg)

![PostgreSQL](https://img.shields.io/badge/postgresql-15-336791.svg)---Sistema completo de gesti√≥n hotelera con **arquitectura multi-base de datos**, soporte para PostgreSQL, MySQL, SQL Server y Oracle.

![MySQL](https://img.shields.io/badge/mysql-8.0-4479A1.svg)

![SQL Server](https://img.shields.io/badge/sql%20server-2019-CC2927.svg)

![Oracle](https://img.shields.io/badge/oracle-21c-F80000.svg)

## üöÄ Inicio R√°pido

**Sistema completo de gesti√≥n hotelera con arquitectura multi-base de datos**



[Caracter√≠sticas](#-caracter√≠sticas) ‚Ä¢ [Instalaci√≥n](#-inicio-r√°pido) ‚Ä¢ [API](#-api-endpoints) ‚Ä¢ [Documentaci√≥n](#-documentaci√≥n) ‚Ä¢ [Contribuir](#-contribuir)

### 1. Levantar Base de Datos---Sistema de base de datos para gesti√≥n hotelera con soporte para PostgreSQL y Oracle.

</div>



---

```bash

## üìã Tabla de Contenidos

docker-compose up -d postgres

- [Caracter√≠sticas](#-caracter√≠sticas)

- [Tecnolog√≠as](#-tecnolog√≠as)```## üöÄ Inicio R√°pido

- [Arquitectura](#-arquitectura)

- [Inicio R√°pido](#-inicio-r√°pido)

- [Estructura del Proyecto](#-estructura-del-proyecto)

- [API Endpoints](#-api-endpoints)### 2. Iniciar Backend

- [Funcionalidades SQL](#-funcionalidades-sql-avanzadas)

- [Cambiar Base de Datos](#-cambiar-base-de-datos)

- [Testing](#-testing)

- [Datos de Prueba](#-datos-de-prueba)```bash### **1. Levantar Base de Datos (PostgreSQL)**## üìÅ Estructura del ProyectoSistema de base de datos para gesti√≥n hotelera con soporte para PostgreSQL y Oracle.

- [Documentaci√≥n](#-documentaci√≥n)

- [Contribuir](#-contribuir)cd backend

- [Troubleshooting](#-troubleshooting)

- [Licencia](#-licencia)npm install



---npm start



## ‚ú® Caracter√≠sticas``````bash



### üéØ Funcionalidades Principales



- ‚úÖ **Multi-Base de Datos**: Cambia entre PostgreSQL, MySQL, SQL Server y Oracle sin modificar c√≥digo### 3. Iniciar Frontenddocker-compose up -d postgres

- ‚úÖ **API RESTful**: 11 endpoints completamente funcionales

- ‚úÖ **Frontend React**: Interfaz moderna y responsive

- ‚úÖ **Adaptador Universal**: Traduce queries autom√°ticamente entre gestores

- ‚úÖ **Funciones Avanzadas SQL**: Procedimientos, triggers, cursores```bash``````

- ‚úÖ **Docker Ready**: Levanta PostgreSQL con un comando

- ‚úÖ **Gesti√≥n Completa**: Hoteles, clientes, reservas, pagos, facturascd frontend



### üî• Caracter√≠sticas T√©cnicasnpm install



- üöÄ **Arquitectura Limpia**: Patr√≥n Factory + Adapternpm start

- üì¶ **Sin Vendor Lock-in**: Independencia total del gestor de BD

- üîÑ **Hot Swap**: Cambia de BD reiniciando el servidor```### **2. Iniciar Backend**proyecto-hotel/

- üé® **Componentizado**: 6 componentes React reutilizables

- üõ°Ô∏è **Manejo de Errores**: Logging centralizado

- üìù **Documentaci√≥n Completa**: README + gu√≠as especializadas

### 4. Acceder

---



## üõ†Ô∏è Tecnolog√≠as

- **Frontend**: http://localhost:3000```bash‚îú‚îÄ‚îÄ docker-compose.yml          # Contenedores PostgreSQL y Oracle## üìÅ Estructura del ProyectoSistema de base de datos para gesti√≥n hotelera con soporte para PostgreSQL y Oracle.Sistema de base de datos para gesti√≥n hotelera con soporte para PostgreSQL y Oracle.

### Backend

- **Runtime**: Node.js 16+- **Backend API**: http://localhost:3001

- **Framework**: Express 4.18.2

- **Drivers DB**: - **PostgreSQL**: localhost:5432cd backend

  - `pg` 8.11.3 (PostgreSQL)

  - `mysql2` 3.6.0 (MySQL) - opcional

  - `mssql` 10.0.1 (SQL Server) - opcional

  - `oracledb` 6.2.0 (Oracle) - opcional## üìä Tecnolog√≠asnpm start



### Frontend

- **Framework**: React 18.2.0

- **HTTP Client**: Axios 1.5.0- **Backend**: Node.js + Express 4.18.2```‚îú‚îÄ‚îÄ benchmark.py                # Script de benchmark (PostgreSQL)

- **Build Tool**: Create React App

- **Frontend**: React 18.2.0  

### Base de Datos

- **PostgreSQL** 15 (por defecto)- **Base de Datos**: PostgreSQL 15 (soporta MySQL, SQL Server, Oracle)

- **MySQL** 8.0 (soportado)

- **SQL Server** 2019 (soportado)- **Adaptador**: Convierte queries autom√°ticamente entre gestores

- **Oracle** 21c (soportado)

### **3. Iniciar Frontend**‚îú‚îÄ‚îÄ README.md                   # Este archivo

### DevOps

- **Containerizaci√≥n**: Docker + Docker Compose---

- **Control de Versiones**: Git



---



## üèóÔ∏è Arquitectura



```

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê---- `GET /api/payments/pending?hotelId=X` - Filtrar por hotel

‚îÇ                      CLIENTE (Browser)                       ‚îÇ

‚îÇ                     React Frontend                           ‚îÇ

‚îÇ                    http://localhost:3000                     ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò## üê≥ Docker- `PATCH /api/payments/:reservaId/mark-paid` - Marcar como pagado3. **HABITACION** - Habitaciones por hotel (PK compuesta: id_hotel, id_habitacion)

                       ‚îÇ HTTP/REST

                       ‚ñº

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ                   SERVIDOR (Node.js)                         ‚îÇ```bash

‚îÇ                  Express + API REST                          ‚îÇ

‚îÇ                 http://localhost:3001                        ‚îÇ# Levantar

‚îÇ                                                               ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇdocker-compose up -d postgres### **Facturas**4. **RESERVA** - Reservaciones de habitaciones- üîå Conectar a PostgreSQL o Oracle‚îî‚îÄ‚îÄ benchmark/                 # Scripts de benchmark y pruebas‚îî‚îÄ‚îÄ benchmark/                 # Scripts de benchmark y pruebas

‚îÇ  ‚îÇ              Backend Routes (5)                       ‚îÇ  ‚îÇ

‚îÇ  ‚îÇ  /api/hotels  /api/clients  /api/reservations        ‚îÇ  ‚îÇ

‚îÇ  ‚îÇ  /api/payments  /api/invoices                        ‚îÇ  ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ# Logs- `GET /api/invoices/:reservaId` - Generar factura de una reserva

‚îÇ                       ‚îÇ                                      ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇdocker logs postgres-hotel

‚îÇ  ‚îÇ           DB Adapter (Universal)                      ‚îÇ  ‚îÇ

‚îÇ  ‚îÇ      Traduce queries entre gestores                   ‚îÇ  ‚îÇ5. **REGISTRO** - Check-in/check-out

‚îÇ  ‚îÇ    $1 ‚Üí ? (MySQL) ‚Üí @p1 (SQL Server) ‚Üí :1 (Oracle)  ‚îÇ  ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ# Conectar

‚îÇ                       ‚îÇ                                      ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇdocker exec -it postgres-hotel psql -U admin_hotel -d hotel_db---

‚îÇ  ‚îÇ         DB Multi (Factory Pattern)                    ‚îÇ  ‚îÇ

‚îÇ  ‚îÇ     Crea pool seg√∫n variable DB_TYPE                  ‚îÇ  ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò# Detener6. **DESTROZO** - Da√±os reportados- üìä Ejecutar benchmarks

                        ‚îÇ

        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îêdocker-compose down

        ‚îÇ               ‚îÇ               ‚îÇ

        ‚ñº               ‚ñº               ‚ñº## üóÑÔ∏è Base de Datos

   PostgreSQL        MySQL        SQL Server / Oracle

   Port 5432      Port 3306      Port 1433 / 1521# Reset completo

```

docker-compose down -v

**Flujo de Datos:**

1. Cliente hace petici√≥n HTTP ‚Üí Backend Express```

2. Route recibe request ‚Üí Llama a `executeQuery()`

3. Adapter traduce query ‚Üí Convierte sintaxis seg√∫n `DB_TYPE`### **Esquema Principal**

4. Factory crea pool ‚Üí Conecta al gestor configurado

5. Gestor ejecuta query ‚Üí Retorna resultados---

6. Backend normaliza datos ‚Üí Env√≠a JSON al cliente

7. React actualiza UI ‚Üí Usuario ve resultados### Relaciones Clave- üìà Ver estad√≠sticas en tiempo real    ‚îú‚îÄ‚îÄ 01_generar_datos_masivos_postgres_OPTIMIZADO.sql    ‚îú‚îÄ‚îÄ 01_generar_datos_masivos_postgres_OPTIMIZADO.sql



---## üìö Documentaci√≥n



## üöÄ Inicio R√°pido```sql



### Prerrequisitos| Archivo | Descripci√≥n |



```bash|---------|-------------|CLIENTE (id_cliente, nombre, apellido_paterno, apellido_materno, fecha_naci)

# Verificar instalaciones

node --version  # >= 16.0.0| `docs/GUIA_MIGRACION_BASES_DATOS.md` | Migraci√≥n a MySQL/SQL Server/Oracle |

npm --version   # >= 8.0.0

docker --version # >= 20.0.0| `docs/GUIA_MULTI_BASE_DATOS.md` | Conexi√≥n simult√°nea a m√∫ltiples BDs |HOTEL (id_hotel, nombre, direccion, ciudad, pais, telefono, email, categoria)

git --version   # >= 2.0.0

```



### Instalaci√≥n---HABITACION (id_hotel, id_habitacion, tipo, capacidad_personas, precio_noche, estado)- `HABITACION` tiene PK compuesta: `(id_hotel, id_habitacion)`- üóÇÔ∏è Ver logs



#### 1Ô∏è‚É£ Clonar el Repositorio



```bash## üîß TroubleshootingRESERVA (id_reserva, fecha_reserva, fecha_ini, fecha_fin, num_huespedes, costo, estado, id_cliente, id_habitacion, id_hotel)

git clone https://github.com/Jazavala1992/Proyecto_hotel.git

cd Proyecto_hotel

```

### Puerto ocupadoREGISTRO (id_registro, id_reserva, fecha_checkin, hora_checkin, fecha_checkout, hora_checkout)- `RESERVA` referencia a `HABITACION` usando ambas columnas

#### 2Ô∏è‚É£ Levantar Base de Datos

```bash

```bash

# PostgreSQL (por defecto)# Detener PostgreSQL localDESTROZO (id_destrozo, id_registro, fecha_reporte, descripcion, costo, estado)

docker-compose up -d postgres

sudo service postgresql stop

# Verificar que est√© corriendo

docker ps | grep postgres``````- `REGISTRO` referencia a `RESERVA` y `HABITACION`    ‚îú‚îÄ‚îÄ 02_generar_datos_masivos_oracle_OPTIMIZADO.sql    ‚îú‚îÄ‚îÄ 02_generar_datos_masivos_oracle_OPTIMIZADO.sql

```



#### 3Ô∏è‚É£ Configurar Backend

### No conecta a BD

```bash

cd backend```bash



# Instalar dependencias# Ver logs### **Funcionalidades SQL**- `DESTROZO` referencia a `REGISTRO`

npm install

docker logs postgres-hotel

# Configurar variables de entorno

cp .env.example .env



# Editar .env con tus credenciales# Reiniciar

nano .env

```docker restart postgres-hotel#### **1. Funci√≥n: Cliente M√°s Recurrente**### Opci√≥n 2: Manual



**Archivo `.env` b√°sico:**```

```properties

PORT=3001```sql

DB_TYPE=postgresql

DB_HOST=localhost### Frontend no conecta

DB_PORT=5432

DB_NAME=hotel_db```bashSELECT * FROM fn_cliente_mas_recurrente(1);  -- Hotel ID 1## üîß Comandos √ötiles

DB_USER=admin_hotel

DB_PASSWORD=hotel123# Verificar backend

```

curl http://localhost:3001/-- Retorna: cliente_id, nombre_cliente, apellido_cliente, total_reservas

#### 4Ô∏è‚É£ Inicializar Base de Datos



```bash

# Desde la ra√≠z del proyecto# Verificar puerto en frontend/src/api.js```    ‚îú‚îÄ‚îÄ 05_benchmark_postgres.sql    ‚îú‚îÄ‚îÄ 05_benchmark_postgres.sql

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/01-create-tables.sql

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/02-insert-data.sql```

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/03-functions.sql

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/04-procedures.sql

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/05-triggers.sql

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/06-funcionalidades-adicionales.sql---



# O con Docker:#### **2. Funci√≥n: Calcular Costo de Reserva**### Conectar a PostgreSQL

docker exec -i proyecto-hotel-postgres-1 psql -U admin_hotel -d hotel_db < init-scripts/01-create-tables.sql

# ... repetir para los dem√°s scripts## üéì Arquitectura

```

```sql

#### 5Ô∏è‚É£ Iniciar Backend

```

```bash

cd backendReact (3000)SELECT calcular_costo_reserva(1, 101, '2024-01-15', '2024-01-20') as costo;**1. Levantar Bases de Datos**

npm start

    ‚Üì HTTP

# Deber√≠as ver:

# ‚úÖ Servidor corriendo en puerto 3001Express (3001)-- Par√°metros: id_hotel, id_habitacion, fecha_ini, fecha_fin

# ‚úÖ Conectado a base de datos: POSTGRESQL

# ‚úÖ Host: localhost:5432    ‚Üì executeQuery()

# ‚úÖ Base de datos: hotel_db

```DB Adapter ‚Üí Convierte $1 ‚Üí ? | @p1 | :1``````bash



#### 6Ô∏è‚É£ Iniciar Frontend    ‚Üì



```bashDB Multi ‚Üí getPool()

# En otra terminal

cd frontend    ‚Üì

npm install

npm startPostgreSQL | MySQL | SQL Server | Oracle#### **3. Procedimiento: Consultar Habitaciones**docker exec -it postgres-hotel psql -U admin_hotel -d hotel_db    ‚îú‚îÄ‚îÄ 06_benchmark_oracle.sql    ‚îú‚îÄ‚îÄ 06_benchmark_oracle.sql



# Se abrir√° autom√°ticamente en http://localhost:3000```

```

```sql

#### 7Ô∏è‚É£ Verificar Instalaci√≥n

**El adaptador traduce queries autom√°ticamente:**

```bash

# Probar API- PostgreSQL: `$1, $2, $3`CALL sp_consultar_habitaciones_hotel(1, 'Disponible', NULL, NULL);```

curl http://localhost:3001/

# Respuesta: {"message":"Hotel API v2.0.0","database":"POSTGRESQL"}- MySQL: `?, ?, ?`



# Probar endpoint de hoteles- SQL Server: `@p1, @p2, @p3`-- Par√°metros: id_hotel, estado (opcional), tipo (opcional), capacidad_min (opcional)

curl http://localhost:3001/api/hotels

# Respuesta: Array con 10 hoteles- Oracle: `:1, :2, :3`

```

``````bash

---

‚ú® **Escribes una vez, funciona en 4 gestores.**

## üìÅ Estructura del Proyecto



```

proyecto-hotel/---

‚îÇ

‚îú‚îÄ‚îÄ backend/                          # Backend Node.js + Express#### **4. Funci√≥n: Generar Factura con Cursor**### Conectar a Oracle

‚îÇ   ‚îú‚îÄ‚îÄ config/

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db-multi.js              # Factory: Crea pools seg√∫n DB_TYPE**Versi√≥n**: 2.0.0  

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db-adapter.js            # Adapter: Traduce queries

‚îÇ   ‚îú‚îÄ‚îÄ routes/**Fecha**: 27 de octubre de 2025  ```sql

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hotels.js                # GET /api/hotels

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients.js               # GET /api/clients/***Estado**: ‚úÖ Producci√≥n Ready

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reservations.js          # POST /api/reservations

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments.js              # GET /api/payments/*SELECT * FROM generar_factura(1);  -- Reserva ID 1docker-compose up -d    ‚îî‚îÄ‚îÄ metricas.sql    ‚îî‚îÄ‚îÄ metricas.sql

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ invoices.js              # POST /api/invoices/generate

‚îÇ   ‚îú‚îÄ‚îÄ server.js                    # Servidor Express principal-- Retorna: item, descripcion, monto (Estad√≠a, Servicios, Impuestos, Da√±os, TOTAL)

‚îÇ   ‚îú‚îÄ‚îÄ package.json                 # Dependencias

‚îÇ   ‚îú‚îÄ‚îÄ .env                         # Variables de entorno (NO en Git)``````bash

‚îÇ   ‚îî‚îÄ‚îÄ .env.example                 # Template de configuraci√≥n

‚îÇ

‚îú‚îÄ‚îÄ frontend/                         # Frontend React

‚îÇ   ‚îú‚îÄ‚îÄ src/#### **5. Trigger: Actualizar Estado Habitaci√≥n**docker exec -it oracle-hotel sqlplus hotel_user/hotel123@FREEPDB1```

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HotelList.js         # Lista de hoteles```sql

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HotelRooms.js        # Habitaciones por hotel

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TopClient.js         # Cliente top-- Autom√°tico al crear reserva: Disponible ‚Üí Ocupada```

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReservationForm.js   # Crear reserva

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PendingPayments.js   # Pagos pendientes-- Autom√°tico al cancelar: Ocupada ‚Üí Disponible

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ InvoiceGenerator.js  # Generar factura

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js                   # Cliente HTTP (axios)`````````

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.js                   # Componente principal

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js                 # Entry point

‚îÇ   ‚îî‚îÄ‚îÄ package.json

‚îÇ---### Ver logs

‚îú‚îÄ‚îÄ init-scripts/                     # Scripts de inicializaci√≥n SQL

‚îÇ   ‚îú‚îÄ‚îÄ 01-create-tables.sql         # 6 tablas

‚îÇ   ‚îú‚îÄ‚îÄ 02-insert-data.sql           # 50 clientes, 10 hoteles, 277 habitaciones

‚îÇ   ‚îú‚îÄ‚îÄ 03-functions.sql             # 3 funciones## üîÑ Cambiar Base de DatosEsto crea:

‚îÇ   ‚îú‚îÄ‚îÄ 04-procedures.sql            # 1 procedimiento

‚îÇ   ‚îú‚îÄ‚îÄ 05-triggers.sql              # 2 triggers

‚îÇ   ‚îî‚îÄ‚îÄ 06-funcionalidades-adicionales.sql  # Cursor + funciones avanzadas

‚îÇEl sistema soporta **4 gestores** de bases de datos. Para cambiar:```bash

‚îú‚îÄ‚îÄ docs/                             # Documentaci√≥n especializada

‚îÇ   ‚îú‚îÄ‚îÄ GUIA_MIGRACION_BASES_DATOS.md   # C√≥mo migrar a MySQL/SQL Server/Oracle

‚îÇ   ‚îú‚îÄ‚îÄ GUIA_MULTI_BASE_DATOS.md        # Conexiones simult√°neas

‚îÇ   ‚îî‚îÄ‚îÄ RESUMEN_LIMPIEZA.md             # Historial de optimizaci√≥n### **PostgreSQL ‚Üí MySQL**# PostgreSQL- **PostgreSQL**: `localhost:5432` - Usuario: `admin_hotel` / Password: `hotel123`

‚îÇ

‚îú‚îÄ‚îÄ docker-compose.yml                # Contenedores Docker

‚îú‚îÄ‚îÄ .gitignore                        # Archivos excluidos de Git

‚îú‚îÄ‚îÄ LICENSE                           # Licencia MIT#### **1. Instalar driver**docker logs postgres-hotel

‚îú‚îÄ‚îÄ CONTRIBUTING.md                   # Gu√≠a de contribuci√≥n

‚îî‚îÄ‚îÄ README.md                         # Este archivo```bash

```

cd backend- **Oracle 23c Free**: `localhost:1521` - Usuario: `hotel_user` / Password: `hotel123`

---

npm install mysql2

## üîå API Endpoints

```# Oracle

### Base URL: `http://localhost:3001`



| M√©todo | Endpoint | Descripci√≥n | Par√°metros |

|--------|----------|-------------|------------|#### **2. Levantar MySQL**docker logs oracle-hotel## üöÄ Inicio R√°pido## üöÄ Inicio R√°pido

| `GET` | `/` | Info del servidor | - |

| `GET` | `/api/hotels` | Lista todos los hoteles | - |```bash

| `GET` | `/api/hotels/:id/rooms` | Habitaciones de un hotel | `id` (path) |

| `GET` | `/api/clients` | Lista todos los clientes | - |docker run -d --name mysql-hotel \```

| `GET` | `/api/clients/top` | Cliente con m√°s reservas | - |

| `GET` | `/api/clients/:id` | Informaci√≥n de un cliente | `id` (path) |  -e MYSQL_DATABASE=hotel_db \

| `POST` | `/api/reservations` | Crear nueva reserva | `body` (JSON) |

| `GET` | `/api/reservations/:clientId` | Reservas de un cliente | `clientId` (path) |  -e MYSQL_USER=admin_hotel \**2. Ejecutar Benchmark de PostgreSQL**

| `GET` | `/api/payments/pending` | Pagos pendientes | - |

| `POST` | `/api/payments` | Registrar pago | `body` (JSON) |  -e MYSQL_PASSWORD=hotel123 \

| `POST` | `/api/invoices/generate` | Generar factura | `body` (JSON) |

  -p 3306:3306 mysql:8.0### Ver estad√≠sticas en tiempo real

### Ejemplos de Uso

```

#### 1. Obtener todos los hoteles

```bash

curl http://localhost:3001/api/hotels

```#### **3. Editar `.env`**



**Respuesta:**```bash```bash

```json

[DB_TYPE=mysql

  {

    "id": 1,DB_PORT=3306docker stats postgres-hotel oracle-hotel```bash

    "nombre": "Hotel Plaza",

    "direccion": "Calle Principal 123",```

    "ciudad": "Ciudad de M√©xico",

    "estrellas": 5,```

    "total_habitaciones": 28

  },#### **4. Reiniciar backend**

  ...

]```bashpython3 benchmark.py### 1. Levantar Bases de Datos### 1. Levantar Bases de Datos

```

npm restart

#### 2. Obtener habitaciones de un hotel

```bash```### Reiniciar contenedores

curl http://localhost:3001/api/hotels/1/rooms

```



**Respuesta:****Consulta `GUIA_MIGRACION_BASES_DATOS.md` para conversi√≥n completa de scripts SQL.**```

```json

[

  {

    "id": 1,---```bash

    "numero": "101",

    "tipo": "Suite",

    "precio": 2500.00,

    "disponible": true## ‚öôÔ∏è Configuraci√≥ndocker-compose restart

  },

  ...

]

```### **Variables de Entorno** (`.env`)```



#### 3. Crear una reserva

```bash

curl -X POST http://localhost:3001/api/reservations \```bashEsto:

  -H "Content-Type: application/json" \

  -d '{# Tipo de base de datos

    "cliente_id": 1,

    "habitacion_id": 5,DB_TYPE=postgresql  # postgresql | mysql | mssql | oracle### Detener todo

    "fecha_inicio": "2025-11-01",

    "fecha_fin": "2025-11-05",

    "numero_huespedes": 2

  }'# Conexi√≥n- Genera 1.4 millones de registros (100K clientes, 1K hoteles, 50K habitaciones, 500K reservas, 500K registros, 250K destrozos)```bash```bash

```

DB_HOST=localhost

**Respuesta:**

```jsonDB_PORT=5432        # 5432 PostgreSQL, 3306 MySQL, 1433 SQL Server, 1521 Oracle```bash

{

  "message": "Reserva creada exitosamente",DB_NAME=hotel_db

  "reservationId": 42,

  "total": 10000.00DB_USER=admin_hoteldocker-compose down- Ejecuta 5 queries de prueba

}

```DB_PASSWORD=hotel123



#### 4. Cliente con m√°s reservas (usando funci√≥n SQL)```

```bash

curl http://localhost:3001/api/clients/top# Servidor

```

PORT=3001- Muestra m√©tricas de rendimiento (tiempo, CPU, memoria, cache)docker-compose up -ddocker-compose up -d

**Respuesta:**

```json```

{

  "id": 15,## üìà Resultados del Benchmark

  "nombre": "Mar√≠a Garc√≠a",

  "email": "maria@example.com",---

  "total_reservas": 8,

  "gasto_total": 45000.00

}

```## üß™ Testing



#### 5. Pagos pendientes**PostgreSQL gan√≥ en todas las categor√≠as:**

```bash

curl http://localhost:3001/api/payments/pending### **Probar API**

```

**Tiempo estimado**: ~15 segundos para todo el proceso``````

**Respuesta:**

```json```bash

[

  {# Verificar servidor| M√©trica | PostgreSQL | Oracle |

    "reserva_id": 23,

    "cliente": "Juan P√©rez",curl http://localhost:3001/

    "hotel": "Hotel Plaza",

    "monto_pendiente": 5000.00,|---------|------------|--------|

    "dias_vencido": 3

  },# Listar hoteles

  ...

]curl http://localhost:3001/api/hotels| Carga de datos (1.4M registros) | 11.41s | Timeout (>180s) |

```



---

# Habitaciones disponibles| Tiempo total queries | 352 ms | 476 ms (estimado) |## üìä Esquema de la Base de Datos

## üéØ Funcionalidades SQL Avanzadas

curl http://localhost:3001/api/hotels/1/rooms

El sistema incluye funciones, procedimientos, triggers y cursores en PostgreSQL:

| Uso de memoria | 186 MB | 2,213 MB |

### 1. **Funci√≥n**: Obtener cliente top

```sql# Cliente m√°s recurrente

SELECT * FROM obtener_cliente_top();

-- Retorna el cliente con m√°s reservascurl http://localhost:3001/api/clients/top/1| CPU | 0.04% | 3.41% |

```



### 2. **Funci√≥n**: Calcular total de reserva

```sql# Pagos pendientes| Cache hit ratio | 99.99% | 98.50% |

SELECT calcular_total_reserva(42);

-- Retorna el costo total de la reserva #42curl http://localhost:3001/api/payments/pending

```

### Tablas PrincipalesEsto crea:Esto crea:

### 3. **Funci√≥n**: Habitaciones disponibles

```sql# Factura

SELECT obtener_habitaciones_disponibles(1, '2025-11-01', '2025-11-05');

-- Retorna habitaciones disponibles del hotel #1 en esas fechascurl http://localhost:3001/api/invoices/1**Conclusi√≥n**: PostgreSQL es **350% m√°s r√°pido** en carga de datos y usa **12x menos memoria**.

```

```

### 4. **Procedimiento**: Procesar pagos pendientes

```sql

CALL procesar_pagos_pendientes();

-- Actualiza el estado de pagos vencidos---

```

## üêç Dependencias Python

### 5. **Trigger**: Actualizar disponibilidad de habitaci√≥n

```sql## üìä Datos de Prueba

-- Se ejecuta autom√°ticamente al crear una reserva

-- Marca la habitaci√≥n como no disponible1. **CLIENTE** - Informaci√≥n de clientes- **PostgreSQL**: `localhost:5432` - Usuario: `admin_hotel` / Password: `hotel123`- **PostgreSQL**: `localhost:5432` - Usuario: `admin_hotel` / Password: `hotel123`

```

El sistema incluye datos de prueba:

### 6. **Trigger**: Validar fechas de reserva

```sql- **50 clientes** bolivianos```bash

-- Se ejecuta antes de insertar una reserva

-- Valida que fecha_fin > fecha_inicio- **10 hoteles** en diferentes ciudades

```

- **277 habitaciones** (Simple, Doble, Suite)pip3 install psycopg2-binary2. **HOTEL** - Datos de hoteles

### 7. **Cursor**: Generar reporte de hoteles

```sql- **64 reservas** con estados variados

-- Itera sobre todos los hoteles y calcula estad√≠sticas

SELECT * FROM generar_reporte_hoteles();- **Precios**: Bs. 120 - Bs. 350 por noche```

```



---

---3. **HABITACION** - Habitaciones por hotel (PK compuesta: id_hotel, id_habitacion)- **Oracle 23c Free**: `localhost:1521` - Usuario: `hotel_user` / Password: `hotel123`- **Oracle 23c Free**: `localhost:1521` - Usuario: `hotel_user` / Password: `hotel123`

## üîÑ Cambiar Base de Datos



El sistema soporta 4 gestores de bases de datos. Cambiar es muy simple:

## üéØ Caracter√≠sticas Principales## üìù Notas T√©cnicas

### PostgreSQL ‚Üí MySQL



#### 1Ô∏è‚É£ Instalar driver

```bash### **Frontend**4. **RESERVA** - Reservaciones de habitaciones

cd backend

npm install mysql2- ‚úÖ Lista de hoteles con estad√≠sticas

```

- ‚úÖ B√∫squeda de habitaciones por hotel- **PostgreSQL** usa `generate_series()` para inserciones ultra-r√°pidas (122K registros/segundo)

#### 2Ô∏è‚É£ Modificar `.env`

```properties- ‚úÖ Cliente m√°s recurrente por hotel

DB_TYPE=mysql

DB_PORT=3306- ‚úÖ Creaci√≥n de reservas con auto-cliente- El schema usa llaves compuestas para simular escenarios reales complejos5. **REGISTRO** - Check-in/check-out

DB_NAME=hotel_db

DB_USER=root- ‚úÖ **Tabla din√°mica de habitaciones** (nueva feature)

DB_PASSWORD=mysql123

```- ‚úÖ **Filtro de pagos por hotel** (nueva feature)- TRUNCATE CASCADE es usado para limpieza r√°pida de datos



#### 3Ô∏è‚É£ Crear base de datos MySQL- ‚úÖ Generaci√≥n de facturas detalladas

```bash

docker-compose up -d mysql- Todo el c√≥digo SQL est√° embebido en `benchmark.py` - no se requieren archivos externos6. **DESTROZO** - Da√±os reportados



# Convertir scripts SQL (sintaxis ligeramente diferente)### **Backend**

# Ver docs/GUIA_MIGRACION_BASES_DATOS.md

```- ‚úÖ Arquitectura multi-base de datos



#### 4Ô∏è‚É£ Reiniciar backend- ‚úÖ Adaptador universal de queries

```bash

npm start- ‚úÖ Transacciones con rollback## ‚ö†Ô∏è Problemas Conocidos### 2. Ejecutar Benchmark de PostgreSQL### 2. Ejecutar Benchmark de PostgreSQL

```

- ‚úÖ Funciones SQL reutilizables

‚úÖ ¬°Listo! Ahora est√°s usando MySQL sin cambiar ni una l√≠nea de c√≥digo.

- ‚úÖ Procedimientos con par√°metros OUT

### PostgreSQL ‚Üí SQL Server

- ‚úÖ Cursores expl√≠citos para reportes

#### 1Ô∏è‚É£ Instalar driver

```bash1. **Oracle Timeout**: Oracle Free puede colgarse al generar >1M registros### Relaciones Clave

npm install mssql

```### **Base de Datos**



#### 2Ô∏è‚É£ Modificar `.env`- ‚úÖ 6 tablas relacionadas2. **Conexiones bloqueadas**: Si PostgreSQL se bloquea, usar:

```properties

DB_TYPE=mssql- ‚úÖ 3 funciones PL/pgSQL

DB_PORT=1433

DB_NAME=hotel_db- ‚úÖ 1 procedimiento almacenado   ```sql

DB_USER=sa

DB_PASSWORD=YourStrong!Passw0rd- ‚úÖ 2 triggers autom√°ticos

```

- ‚úÖ Foreign keys con CASCADE   SELECT pg_terminate_backend(pid) FROM pg_stat_activity 

#### 3Ô∏è‚É£ Reiniciar

```bash- ‚úÖ √çndices optimizados

npm start

```   WHERE state = 'active' AND pid <> pg_backend_pid();- `HABITACION` tiene PK compuesta: `(id_hotel, id_habitacion)`



### PostgreSQL ‚Üí Oracle---



#### 1Ô∏è‚É£ Instalar driver   ```

```bash

npm install oracledb## üê≥ Docker

```

- `RESERVA` referencia a `HABITACION` usando ambas columnas```bash```bash

#### 2Ô∏è‚É£ Modificar `.env`

```properties### **Comandos √ötiles**

DB_TYPE=oracle

DB_PORT=1521## üìÑ Licencia

DB_NAME=XEPDB1

DB_USER=system```bash

DB_PASSWORD=oracle123

```# Levantar PostgreSQL- `REGISTRO` referencia a `RESERVA` y `HABITACION`



#### 3Ô∏è‚É£ Reiniciardocker-compose up -d postgres

```bash

npm startProyecto educativo - Uso libre

```

# Ver logs

**Nota**: El adaptador traduce autom√°ticamente:

- PostgreSQL: `SELECT * FROM hoteles WHERE id = $1`docker logs postgres-hotel- `DESTROZO` referencia a `REGISTRO`python3 benchmark.pypython3 benchmark.py

- MySQL: `SELECT * FROM hoteles WHERE id = ?`

- SQL Server: `SELECT * FROM hoteles WHERE id = @p1`

- Oracle: `SELECT * FROM hoteles WHERE id = :1`

# Conectar a psql

---

docker exec -it postgres-hotel psql -U admin_hotel -d hotel_db

## üß™ Testing

## üîß Comandos √ötiles``````

### Probar Backend

# Detener

```bash

cd backenddocker-compose down



# Verificar servidor

curl http://localhost:3001/

# Eliminar datos (reset completo)### Conectar a PostgreSQL

# Probar todos los endpoints

curl http://localhost:3001/api/hotelsdocker-compose down -v

curl http://localhost:3001/api/hotels/1/rooms

curl http://localhost:3001/api/clients```

curl http://localhost:3001/api/clients/top

curl http://localhost:3001/api/payments/pending



# Crear reserva de prueba---```bashEsto:Esto:

curl -X POST http://localhost:3001/api/reservations \

  -H "Content-Type: application/json" \

  -d '{

    "cliente_id": 1,## üìö Documentaci√≥n Adicionaldocker exec -it postgres-hotel psql -U admin_hotel -d hotel_db

    "habitacion_id": 5,

    "fecha_inicio": "2025-12-01",

    "fecha_fin": "2025-12-05",

    "numero_huespedes": 2| Archivo | Descripci√≥n |```- Genera 1.4 millones de registros (100K clientes, 1K hoteles, 50K habitaciones, 500K reservas, 500K registros, 250K destrozos)- Genera 1.4 millones de registros (100K clientes, 1K hoteles, 50K habitaciones, 500K reservas, 500K registros, 250K destrozos)

  }'

```|---------|-------------|



### Probar Frontend| `GUIA_MIGRACION_BASES_DATOS.md` | Gu√≠a completa para migrar a MySQL, SQL Server u Oracle |



```bash| `GUIA_MULTI_BASE_DATOS.md` | Opciones de conexi√≥n simult√°nea a m√∫ltiples BDs |

cd frontend

### Conectar a Oracle- Ejecuta 5 queries de prueba- Ejecuta 5 queries de prueba

# Iniciar en modo desarrollo

npm start---



# Abrir en navegador:

# http://localhost:3000

```## üîß Troubleshooting



### Probar Base de Datos```bash- Muestra m√©tricas de rendimiento (tiempo, CPU, memoria, cache)- Muestra m√©tricas de rendimiento (tiempo, CPU, memoria, cache)



```bash### **Error: Port 5432 already in use**

# Conectar a PostgreSQL

psql -U admin_hotel -h localhost -d hotel_db```bashdocker exec -it oracle-hotel sqlplus hotel_user/hotel123@FREEPDB1



# Queries de prueba# Detener PostgreSQL local

SELECT COUNT(*) FROM hoteles;          -- Debe retornar 10

SELECT COUNT(*) FROM clientes;         -- Debe retornar 50sudo service postgresql stop```

SELECT COUNT(*) FROM habitaciones;     -- Debe retornar 277



# Probar funci√≥n

SELECT * FROM obtener_cliente_top();# O cambiar puerto en docker-compose.yml



# Probar procedimientoports:

CALL procesar_pagos_pendientes();

  - "5433:5432"### Ver logs**Tiempo estimado**: ~15 segundos para todo el proceso**Tiempo estimado**: ~15 segundos para todo el proceso

# Salir

\q```

```



---

### **Error: Cannot connect to database**

## üìä Datos de Prueba

```bash```bash

El sistema incluye datos de prueba realistas:

# Verificar que el contenedor est√° corriendo

| Tabla | Registros | Descripci√≥n |

|-------|-----------|-------------|docker ps | grep postgres# PostgreSQL

| `hoteles` | 10 | Hoteles de 1 a 5 estrellas |

| `habitaciones` | 277 | Tipos: Simple, Doble, Suite (15-28 por hotel) |

| `clientes` | 50 | Nombres, emails, tel√©fonos |

| `reservas` | ~100 | Reservas activas y pasadas |# Ver logsdocker logs postgres-hotel## üìä Esquema de la Base de Datos## üìä Esquema de la Base de Datos

| `pagos` | ~150 | Pagos completados y pendientes |

| `facturas` | ~80 | Facturas generadas |docker logs postgres-hotel



### Ejemplos de Hoteles



- **Hotel Plaza** (5‚≠ê) - Ciudad de M√©xico - 28 habitaciones# Reiniciar contenedor

- **Hotel Ejecutivo** (4‚≠ê) - Monterrey - 24 habitaciones

- **Hotel Express** (3‚≠ê) - Guadalajara - 20 habitacionesdocker restart postgres-hotel# Oracle



### Cliente de Ejemplo```



```sqldocker logs oracle-hotel

-- Cliente ID: 1

nombre: 'Juan P√©rez'### **Error: Frontend no conecta con backend**

email: 'juan.perez@example.com'

telefono: '+52 55 1234 5678'```bash```### Tablas Principales### Tablas Principales

```

# Verificar que backend est√° corriendo

---

curl http://localhost:3001/

## üìö Documentaci√≥n



### Gu√≠as Especializadas

# Revisar CORS en backend/server.js### Ver estad√≠sticas en tiempo real

- üìñ **[GUIA_MIGRACION_BASES_DATOS.md](docs/GUIA_MIGRACION_BASES_DATOS.md)**

  - Migraci√≥n a MySQL# Verificar puerto en frontend/src/api.js

  - Migraci√≥n a SQL Server

  - Migraci√≥n a Oracle```

  - Diferencias de sintaxis SQL



- üìñ **[GUIA_MULTI_BASE_DATOS.md](docs/GUIA_MULTI_BASE_DATOS.md)**

  - Conexiones simult√°neas---```bash1. **CLIENTE** - Informaci√≥n de clientes1. **CLIENTE** - Informaci√≥n de clientes

  - Dual pool configuration

  - Selector de BD por endpoint



- üìñ **[RESUMEN_LIMPIEZA.md](docs/RESUMEN_LIMPIEZA.md)**## üéì Arquitecturadocker stats postgres-hotel oracle-hotel

  - Historial de optimizaci√≥n

  - Archivos eliminados

  - Estad√≠sticas del proyecto

### **Flujo de Datos**```2. **HOTEL** - Datos de hoteles2. **HOTEL** - Datos de hoteles

### Documentaci√≥n del C√≥digo



```javascript

// Cada funci√≥n est√° documentada con JSDoc```

/**

 * Ejecuta una query adaptada al gestor de BD actualReact Frontend (3000)

 * @param {Object} pool - Connection pool

 * @param {string} query - Query SQL con placeholders PostgreSQL ($1, $2...)    ‚Üì HTTP Request### Reiniciar contenedores3. **HABITACION** - Habitaciones por hotel (PK compuesta: id_hotel, id_habitacion)3. **HABITACION** - Habitaciones por hotel (PK compuesta: id_hotel, id_habitacion)

 * @param {Array} params - Par√°metros de la query

 * @returns {Promise<Array>} Resultados normalizadosExpress API (3001)

 */

async function executeQuery(pool, query, params) {    ‚Üì executeQuery()

  // ...

}DB Adapter

```

    ‚Üì Convierte $1 ‚Üí ? | @p1 | :1```bash4. **RESERVA** - Reservaciones de habitaciones4. **RESERVA** - Reservaciones de habitaciones

---

DB Multi

## ü§ù Contribuir

    ‚Üì getPool()docker-compose restart

¬°Las contribuciones son bienvenidas! Lee la [Gu√≠a de Contribuci√≥n](CONTRIBUTING.md) para empezar.

PostgreSQL | MySQL | SQL Server | Oracle

### Proceso R√°pido

``````5. **REGISTRO** - Check-in/check-out5. **REGISTRO** - Check-in/check-out

1. **Fork** el repositorio

2. **Crea** una rama (`git checkout -b feature/amazing-feature`)

3. **Commit** tus cambios (`git commit -m 'feat: add amazing feature'`)

4. **Push** a la rama (`git push origin feature/amazing-feature`)### **Adaptador Universal**

5. **Abre** un Pull Request



### √Åreas que Necesitan Ayuda

El adaptador traduce autom√°ticamente:### Detener todo6. **DESTROZO** - Da√±os reportados6. **DESTROZO** - Da√±os reportados

- ‚úÖ Tests unitarios (aumentar cobertura)

- üìù Documentaci√≥n (m√°s ejemplos)- `$1, $2, $3` ‚Üí PostgreSQL

- üé® UI/UX (mejorar interfaz)

- üöÄ Performance (optimizar queries)- `?, ?, ?` ‚Üí MySQL

- üåç Internacionalizaci√≥n (agregar idiomas)

- `@p1, @p2, @p3` ‚Üí SQL Server

---

- `:1, :2, :3` ‚Üí Oracle```bash

## üêõ Troubleshooting



### Error: "Cannot connect to database"

**Resultado**: Escribes c√≥digo una vez, funciona en 4 gestores.docker-compose down

**Soluci√≥n:**

```bash

# Verificar que el contenedor est√© corriendo

docker ps | grep postgres---```### Relaciones Clave### Relaciones Clave



# Verificar credenciales en .env

cat backend/.env

**Versi√≥n**: 2.0.0  

# Reintentar conexi√≥n

cd backend && npm start**√öltima actualizaci√≥n**: 27 de octubre de 2025  

```

**Estado**: ‚úÖ Producci√≥n Ready## üìà Resultados del Benchmark

### Error: "Port 3001 already in use"



**Soluci√≥n:**

```bash

# Encontrar proceso usando el puerto**PostgreSQL gan√≥ en todas las categor√≠as:**- `HABITACION` tiene PK compuesta: `(id_hotel, id_habitacion)`- `HABITACION` tiene PK compuesta: `(id_hotel, id_habitacion)`

lsof -i :3001



# Matar proceso

kill -9 <PID>| M√©trica | PostgreSQL | Oracle |- `RESERVA` referencia a `HABITACION` usando ambas columnas- `RESERVA` referencia a `HABITACION` usando ambas columnas



# O cambiar puerto en .env|---------|------------|--------|

PORT=3002

```| Carga de datos (1.4M registros) | 11.41s | Timeout (>180s) |- `REGISTRO` referencia a `RESERVA` y `HABITACION`- `REGISTRO` referencia a `RESERVA` y `HABITACION`



### Error: "relation 'hoteles' does not exist"| Tiempo total queries | 352 ms | 476 ms (estimado) |



**Soluci√≥n:**| Uso de memoria | 186 MB | 2,213 MB |- `DESTROZO` referencia a `REGISTRO`- `DESTROZO` referencia a `REGISTRO`

```bash

# Ejecutar scripts de inicializaci√≥n| CPU | 0.04% | 3.41% |

cd proyecto-hotel

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/01-create-tables.sql| Cache hit ratio | 99.99% | 98.50% |

psql -U admin_hotel -h localhost -d hotel_db -f init-scripts/02-insert-data.sql

```



### Frontend no se conecta al backend**Conclusi√≥n**: PostgreSQL es **350% m√°s r√°pido** en carga de datos y usa **12x menos memoria**.## üîß Comandos √ötiles## üîß Comandos √ötiles



**Soluci√≥n:**

```bash

# Verificar que backend est√© corriendo## üêç Dependencias Python

curl http://localhost:3001/



# Verificar CORS en server.js

# Debe incluir: app.use(cors());```bash### Conectar a PostgreSQL### Conectar a PostgreSQL



# Verificar URL en frontend/src/api.jspip3 install psycopg2-binary

# Debe ser: baseURL: 'http://localhost:3001'

``````



### Error al instalar `oracledb`



**Soluci√≥n:**## üìù Notas T√©cnicas```bash```bash

```bash

# Oracle requiere cliente nativo

# Instalar Oracle Instant Client

# Ver: https://oracle.github.io/node-oracledb/INSTALL.html- **PostgreSQL** usa `generate_series()` para inserciones ultra-r√°pidas (122K registros/segundo)docker exec -it postgres-hotel psql -U admin_hotel -d hotel_dbdocker exec -it postgres-hotel psql -U admin_hotel -d hotel_db



# O usar solo PostgreSQL/MySQL que no requieren librer√≠as nativas- **Oracle** usa `FORALL` bulk inserts pero es considerablemente m√°s lento

```

- El schema usa llaves compuestas para simular escenarios reales complejos``````

---

- TRUNCATE CASCADE es usado para limpieza r√°pida de datos

## üìä Comandos Docker



```bash

# Levantar PostgreSQL## ‚ö†Ô∏è Problemas Conocidos

docker-compose up -d postgres

### Conectar a Oracle### Conectar a Oracle

# Ver logs

docker-compose logs -f postgres1. **Oracle Timeout**: Oracle Free puede colgarse al generar >1M registros



# Detener2. **Conexiones bloqueadas**: Si PostgreSQL se bloquea, usar:

docker-compose down

   ```sql

# Reiniciar con datos limpios

docker-compose down -v   SELECT pg_terminate_backend(pid) FROM pg_stat_activity ```bash```bash

docker-compose up -d postgres

   WHERE state = 'active' AND pid <> pg_backend_pid();

# Conectar al contenedor

docker exec -it proyecto-hotel-postgres-1 bash   ```docker exec -it oracle-hotel sqlplus hotel_user/hotel123@FREEPDB1docker exec -it oracle-hotel sqlplus hotel_user/hotel123@FREEPDB1



# Ejecutar psql dentro del contenedor

docker exec -it proyecto-hotel-postgres-1 psql -U admin_hotel -d hotel_db

```## üìÑ Licencia``````



---



## üìÑ LicenciaProyecto educativo - Uso libre



Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para m√°s detalles.

### Ver logs### Ver logs

```

MIT License



Copyright (c) 2025 Jose Zavala```bash```bash



Se concede permiso gratuito a cualquier persona que obtenga una copia# PostgreSQL# PostgreSQL

de este software para usar, copiar, modificar, fusionar, publicar,

distribuir, sublicenciar y/o vender copias del Software...docker logs postgres-hoteldocker logs postgres-hotel

```



---

# Oracle# Oracle

## üë®‚Äçüíª Autor

docker logs oracle-hoteldocker logs oracle-hotel

**Jose Zavala**

- GitHub: [@Jazavala1992](https://github.com/Jazavala1992)``````

- Proyecto: [Proyecto_hotel](https://github.com/Jazavala1992/Proyecto_hotel)



---

### Reiniciar contenedores### Reiniciar contenedores

## üôè Agradecimientos



- Node.js y Express por el excelente framework backend

- React por la librer√≠a de UI```bash```bash

- PostgreSQL por el robusto gestor de BD

- Comunidad open source por el soportedocker-compose restartdocker-compose restart



---``````



## üìà Roadmap



### v2.1.0 (Pr√≥xima versi√≥n)### Detener todo### Detener todo

- [ ] Tests unitarios con Jest

- [ ] Tests de integraci√≥n

- [ ] CI/CD con GitHub Actions

- [ ] Deploy a producci√≥n (Heroku/Railway)```bash```bash



### v2.2.0docker-compose downdocker-compose down

- [ ] Autenticaci√≥n JWT

- [ ] Roles de usuario (Admin, Recepcionista, Cliente)``````

- [ ] Panel de administraci√≥n

- [ ] Reportes en PDF



### v3.0.0## üìà Resultados del Benchmark## üìà Resultados del Benchmark

- [ ] WebSockets para reservas en tiempo real

- [ ] Sistema de notificaciones

- [ ] Integraci√≥n con pasarelas de pago

- [ ] App m√≥vil con React Native**PostgreSQL gan√≥ en todas las categor√≠as:****PostgreSQL gan√≥ en todas las categor√≠as:**



---



## üìû Soporte| M√©trica | PostgreSQL | Oracle || M√©trica | PostgreSQL | Oracle |



¬øTienes preguntas? Abre un [Issue](https://github.com/Jazavala1992/Proyecto_hotel/issues) o inicia una [Discusi√≥n](https://github.com/Jazavala1992/Proyecto_hotel/discussions).|---------|------------|--------||---------|------------|--------|



---| Carga de datos (1.4M registros) | 11.41s | Timeout (>180s) || Carga de datos (1.4M registros) | 11.41s | Timeout (>180s) |



<div align="center">| Tiempo total queries | 352 ms | 476 ms (estimado) || Tiempo total queries | 352 ms | 476 ms (estimado) |



**‚≠ê Si te gusta este proyecto, dale una estrella en GitHub ‚≠ê**| Uso de memoria | 186 MB | 2,213 MB || Uso de memoria | 186 MB | 2,213 MB |



[![GitHub stars](https://img.shields.io/github/stars/Jazavala1992/Proyecto_hotel?style=social)](https://github.com/Jazavala1992/Proyecto_hotel/stargazers)| CPU | 0.04% | 3.41% || CPU | 0.04% | 3.41% |

[![GitHub forks](https://img.shields.io/github/forks/Jazavala1992/Proyecto_hotel?style=social)](https://github.com/Jazavala1992/Proyecto_hotel/network/members)

| Cache hit ratio | 99.99% | 98.50% || Cache hit ratio | 99.99% | 98.50% |

**Hecho con ‚ù§Ô∏è y ‚òï por Jose Zavala**



</div>

**Conclusi√≥n**: PostgreSQL es **350% m√°s r√°pido** en carga de datos y usa **12x menos memoria**.**Conclusi√≥n**: PostgreSQL es **350% m√°s r√°pido** en carga de datos y usa **12x menos memoria**.



## üêç Dependencias Python## üêç Dependencias Python



```bash```bash

pip3 install psycopg2-binarypip3 install psycopg2-binary

``````



## üìù Notas T√©cnicas## üìù Notas T√©cnicas



- **PostgreSQL** usa `generate_series()` para inserciones ultra-r√°pidas (122K registros/segundo)- **PostgreSQL** usa `generate_series()` para inserciones ultra-r√°pidas (122K registros/segundo)

- **Oracle** usa `FORALL` bulk inserts pero es considerablemente m√°s lento- **Oracle** usa `FORALL` bulk inserts pero es considerablemente m√°s lento

- El schema usa llaves compuestas para simular escenarios reales complejos- El schema usa llaves compuestas para simular escenarios reales complejos

- TRUNCATE CASCADE es usado para limpieza r√°pida de datos- TRUNCATE CASCADE es usado para limpieza r√°pida de datos



## ‚ö†Ô∏è Problemas Conocidos## ‚ö†Ô∏è Problemas Conocidos



1. **Oracle Timeout**: Oracle Free puede colgarse al generar >1M registros1. **Oracle Timeout**: Oracle Free puede colgarse al generar >1M registros

2. **Conexiones bloqueadas**: Si PostgreSQL se bloquea, usar:2. **Conexiones bloqueadas**: Si PostgreSQL se bloquea, usar:

   ```sql   ```sql

   SELECT pg_terminate_backend(pid) FROM pg_stat_activity    SELECT pg_terminate_backend(pid) FROM pg_stat_activity 

   WHERE state = 'active' AND pid <> pg_backend_pid();   WHERE state = 'active' AND pid <> pg_backend_pid();

   ```   ```



## üìÑ Licencia## üìÑ Licencia



Proyecto educativo - Uso libreProyecto educativo - Uso libre

